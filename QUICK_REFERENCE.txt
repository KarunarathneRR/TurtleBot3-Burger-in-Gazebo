╔══════════════════════════════════════════════════════════════════════════╗
║  🤖 TURTLEBOT3 NAVIGATION - QUICK START GUIDE                            ║
║  Fix for: Robot moves but no localization display in RViz               ║
╚══════════════════════════════════════════════════════════════════════════╝

┌──────────────────────────────────────────────────────────────────────────┐
│ TERMINAL 1: Start Gazebo                                                │
└──────────────────────────────────────────────────────────────────────────┘
cd ~/RIS-TurtleBot3-Autonomous-Navigation
source install/setup.bash
ros2 launch my_simulations maze_world.launch.py

┌──────────────────────────────────────────────────────────────────────────┐
│ TERMINAL 2: Start Navigation                                            │
└──────────────────────────────────────────────────────────────────────────┘
cd ~/RIS-TurtleBot3-Autonomous-Navigation
source install/setup.bash
ros2 launch my_simulations nav2_maze.launch.py

┌──────────────────────────────────────────────────────────────────────────┐
│ TERMINAL 3: Setup Localization (NEW - FIX!)                             │
└──────────────────────────────────────────────────────────────────────────┘
cd ~/RIS-TurtleBot3-Autonomous-Navigation
./SETUP_LOCALIZATION.sh

┌──────────────────────────────────────────────────────────────────────────┐
│ TERMINAL 4: Start RViz (Clean - No Stereo Warnings)                     │
└──────────────────────────────────────────────────────────────────────────┘
cd ~/RIS-TurtleBot3-Autonomous-Navigation
./start_rviz.sh

OR (standard way with stereo info messages):
ros2 run rviz2 rviz2 -d config/nav2_default_view.rviz

╔══════════════════════════════════════════════════════════════════════════╗
║  WHAT YOU SHOULD SEE IN RVIZ                                            ║
╚══════════════════════════════════════════════════════════════════════════╝

Displays Panel (Left Side):
  ✓ Grid                     - Gray grid lines
  ✓ RobotModel               - Blue/white TurtleBot3
  ✓ TF                       - Coordinate frames
  ✓ LaserScan                - RED dots (what robot sees)
  ✓ Map                      - Black/white maze map
  ✓ Amcl Particle Swarm      - GREEN arrows (localization particles)
  ✓ Amcl Pose               - YELLOW arrow (pose estimate) ← NEW!
  ✓ Global Planner           - Green path line
  ✓ Controller               - Red path line
  ✓ Global Costmap           - Colored obstacles
  ✓ Local Costmap            - Colored obstacles

Navigation 2 Panel (Bottom Left):
  Navigation:     Ready       (NOT "unknown")
  Localization:   Converged   (NOT "unknown")
  Feedback:       Idle        (NOT "unknown")

╔══════════════════════════════════════════════════════════════════════════╗
║  HOW TO USE NAVIGATION                                                  ║
╚══════════════════════════════════════════════════════════════════════════╝

1. Wait for GREEN particle cloud to appear and converge (5-10 seconds)

2. If particles don't appear, click "2D Pose Estimate" button
   - Click on map where robot is (center at 0,0)
   - Drag to set orientation
   - Release

3. Once localization shows "Converged", click "Nav2 Goal" button
   - Click destination on map
   - Drag to set goal orientation
   - Release

4. Watch robot navigate! You'll see:
   - Green global path
   - Red local path
   - Robot following the path
   - Feedback: "Navigating"

╔══════════════════════════════════════════════════════════════════════════╗
║  TROUBLESHOOTING                                                        ║
╚══════════════════════════════════════════════════════════════════════════╝

┌──────────────────────────────────────────────────────────────────────────┐
│ Issue: "Stereo is NOT SUPPORTED" messages                               │
└──────────────────────────────────────────────────────────────────────────┘
→ This is NORMAL and NOT an error!
→ Use ./start_rviz.sh to hide these messages
→ Read: RVIZ_STEREO_INFO.md for full explanation

┌──────────────────────────────────────────────────────────────────────────┐
│ Issue: No green particle cloud visible                                  │
└──────────────────────────────────────────────────────────────────────────┘
→ Run: ./SETUP_LOCALIZATION.sh
→ Or click "2D Pose Estimate" in RViz
→ Check: ros2 topic hz /particle_cloud

┌──────────────────────────────────────────────────────────────────────────┐
│ Issue: Localization shows "unknown"                                     │
└──────────────────────────────────────────────────────────────────────────┘
→ Set initial pose (see above)
→ Wait 10-15 seconds for convergence
→ Check: ros2 topic echo /amcl_pose --once

┌──────────────────────────────────────────────────────────────────────────┐
│ Issue: Robot doesn't move to goal                                       │
└──────────────────────────────────────────────────────────────────────────┘
→ Make sure localization is "Converged" first
→ Check goal is not in obstacle/unknown space
→ Verify: ros2 topic echo /cmd_vel

╔══════════════════════════════════════════════════════════════════════════╗
║  VERIFICATION COMMANDS                                                  ║
╚══════════════════════════════════════════════════════════════════════════╝

# Check all navigation nodes are running
ros2 node list

# Check laser scan (should be ~10-30 Hz)
ros2 topic hz /scan

# Check particle cloud (should be ~1-5 Hz)
ros2 topic hz /particle_cloud

# Check AMCL pose
ros2 topic echo /amcl_pose --once

# Check map is loaded
ros2 topic echo /map --once

# Check TF tree
ros2 run tf2_tools view_frames
evince frames.pdf

╔══════════════════════════════════════════════════════════════════════════╗
║  HELPER SCRIPTS                                                         ║
╚══════════════════════════════════════════════════════════════════════════╝

./SETUP_LOCALIZATION.sh     - Initialize localization (run once)
./start_rviz.sh             - Start RViz without stereo warnings
./FIX_LOCALIZATION_NOW.sh   - Quick fix if localization fails
./scripts/set_initial_pose.sh - Set custom initial pose

╔══════════════════════════════════════════════════════════════════════════╗
║  DOCUMENTATION                                                          ║
╚══════════════════════════════════════════════════════════════════════════╝

FIX_LOCALIZATION.md    - Complete localization troubleshooting guide
RVIZ_STEREO_INFO.md    - Explanation of stereo messages (not errors!)
RUN_PROJECT.md         - Full project setup guide
FIX_NAVIGATION.md      - Navigation troubleshooting

╔══════════════════════════════════════════════════════════════════════════╗
║  WHAT WAS FIXED                                                         ║
╚══════════════════════════════════════════════════════════════════════════╝

✓ Added "Amcl Pose" display to RViz config
✓ Configured AMCL to auto-set initial pose (0,0,0)
✓ Created helper scripts for easy localization setup
✓ Created clean RViz startup (no stereo warnings)

Now your robot will show localization visualization and you can see it
navigate to goals you select in RViz!

╔══════════════════════════════════════════════════════════════════════════╗
║  NEED HELP?                                                             ║
╚══════════════════════════════════════════════════════════════════════════╝

Read the guides:
  cat FIX_LOCALIZATION.md     - Localization issues
  cat RVIZ_STEREO_INFO.md     - Stereo messages explained

Check system status:
  ros2 node list              - All running nodes
  ros2 topic list             - All active topics
  ros2 topic hz /scan         - Laser scan frequency

══════════════════════════════════════════════════════════════════════════
                    🎉 Happy Robot Navigation! 🤖
══════════════════════════════════════════════════════════════════════════
